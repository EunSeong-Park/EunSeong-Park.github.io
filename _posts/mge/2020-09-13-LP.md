---
title: "LP Modeling"
tags: Data-Science Management-Engineering Modeling
toc: true
---

# Intro
선형 계획법(LP, Linear Programming)은 최적화와 모델링의 기초다. LP는 선형 함수로 주어진 constraint와 objective function에 대해, 그것의 최적해를 찾는 문제다. 

# LP Basics
## LP Formulation
무엇보다도, 주어진 문제 상황에 대한 적절한 formulation이 중요하다. 각각의 constraint는 어떻게 표현될 수 있을지, 최적화하려는 목적 함수는 어떻게 표현될지 등을 정하고, 이들의 관계를 명시해야 한다.

일반적으로 다음과 같은 과정을 따른다.

1. 필요한 변수(decision variable)들을 파악하고 정의한다. ($x_1, x_2, ...$)
2. 목적 함수를 formulate하고, 그것의 최적화 방향(maximize? minimize?)을 결정한다.
3. Constraint를 formulate하고 constraint set을 결정한다.

다음과 같은 예시를 생각해보자.

> 한 공장에서는 A, B 두 제품을 생산할 수 있다. A는 만드는 데 3시간과 원자재 2kg이 필요하고, B는 만드는 데 1시간과 원자재 3kg이 필요하다. 생산 가능한 시간은 총 1000시간이며, 원자재는 총 1000kg을 보유하고 있다. A와 B 모두 생산 당 1000원의 이윤이 남는다고 가정하면, 이윤을 최대화하기 위해 A와 B를 얼마나 생산해야 할까?

우리는 A와 B 생산량(각각 $x_a, x_b$라 하자)을 decision varible로 생각할 수 있다. 왜냐? 이 둘은 우리가 통제하고 조절할 수 있는 변수기 때문이다. 그렇다면 목적 함수는 꽤 명확하게 다가온다. $z = 1000x_a + 1000x_b$를 최대로 만들 해를 찾아주면 된다.

이제 constraint를 결정해보자. 우리는 시간과 원자재량의 제약을 부등식으로 나타낼 수 있다. 또, $x_a$와 $x_b$는 음수가 될 수 없음을 명심하자(non-negative).

- $3x_a + x_b \le 1000$
- $2x_a + 3x_b \le 1000$
- $x_a, x_b \ge 0$

이로써, 우리는 문제 해결을 위한 적당한 모델을 세우는 데 성공했다. 

### Vector / Matrix Representation
그런데, 변수가 굉장히 많아지면 모델을 표현하기 굉장히 불편할 것 같다. 그래서 우리는 벡터와 행렬을 이용한다.

Decision variable $x_1, x_2, ..., x_n$과, 목적 함수에서 변수들의 계수(즉, profit) $c_1, c_2, ..., c_n$이 있다. 또, 각각의 constraint에 해당하는 계수($a_{11}, a_{12}, ..., a_{21}, ...)와 리미트($b_1, b_2, ..., b_m)$가 있을 것이다. 이를 정리하면,

![](/imgs/mge/lp1.png)

- $ z = c_1x_1 + c_2x_2 + ... + c_nx_n $
- $ a_{11}x_1 + ... + a_{1n}x_n \le b_1 $
- ...
- $ a_{m1}x_1 + ... + a_{mn}x_n$ \le b_m $

위 식은 다음과 같이 나타낼 수 있다.

- $z = \mathbf{c}^T\mathbf{x}$
- $\mathbh{Ax} \le \mathbf{b}$


## NLP to LP Modeling
일반적으로 비선형적인 문제가 선형적인 문제보다 어렵고 복잡하다. 그래서 가능하다면, 우리는 비선형 문제를 선형 문제로 치환하여 해결하려 한다. 우리는 몇 가지 경우에서의 NLP to LP 변환을 시도할 것이다.

### Linear Fractional Program
